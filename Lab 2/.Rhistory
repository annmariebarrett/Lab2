tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line(aes(color = name))
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line(aes(color = name))+
geom_ribbon(aes(ymin=0, ymax = value, fill = name))
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line(aes(color = name))+
geom_ribbon(aes(ymin=0, ymax = value, fill = name)) +
geom_text(aes(label = name), position = "stack")
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line(aes(color = name)) +
geom_text(aes(label = type))
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line(aes(color = name)) +
geom_text(aes(label = name))
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line(aes(color = name))+
geom_ribbon(aes(ymin=0, ymax = value, fill = name)) +
geom_text(aes(label = name))
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line(aes(color = name))+
geom_ribbon(aes(ymin=0, ymax = value, fill = name))
??factor_reorder
tv_states_long <- tidyr::pivot_longer(tv_states, c(florida, texas, puerto_rico)) %>%
recode_factor(c("florida", "texas", "puerto_rico"))
tv_states_long <- tidyr::pivot_longer(tv_states, c(florida, texas, puerto_rico)) %>%
recode_factor(c(florida = "Florida", texas = "Texas", puerto_rico = "Puerto Rico"))
tv_states_long <- tidyr::pivot_longer(tv_states, c(florida, texas, puerto_rico)) %>%
recode_factor(name, c(florida = "Florida", texas = "Texas", puerto_rico = "Puerto Rico"))
tv_states_long <- tidyr::pivot_longer(tv_states, c(florida, texas, puerto_rico)) %>%
recode_factor(tv_states$name, c(florida = "Florida", texas = "Texas", puerto_rico = "Puerto Rico"))
tv_states_long <- tidyr::pivot_longer(tv_states, c(florida, texas, puerto_rico)) %>%
tv_states_long<-recode_factor(name, c(florida = "Florida", texas = "Texas", puerto_rico = "Puerto Rico"))
tv_states_long<-recode_factor(name, c(florida = "Florida", texas = "Texas", puerto_rico = "Puerto Rico"))
tv_states_long<-recode_factor(tv_states_long$name, c(florida = "Florida", texas = "Texas", puerto_rico = "Puerto Rico"))
tv_states_long<- tv_states_long %>% recode_factor(tv_states_long$name, c(florida = "Florida", texas = "Texas", puerto_rico = "Puerto Rico"))
tv_states_long <- tidyr::pivot_longer(tv_states, c(florida, texas, puerto_rico)) %>%
rename("Florida" = florida)
tv_states_long <- tidyr::pivot_longer(tv_states, c(florida, texas, puerto_rico)) %>%
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line(aes(color = name))+
geom_ribbon(aes(ymin=0, ymax = value, fill = name))+
scale_fill_manual(values = c("#00AFBB", "#E7B800", "#FC4E07"))
tv_states_long <- tidyr::pivot_longer(tv_states, c(florida, texas, puerto_rico))
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line(aes(color = name))+
geom_ribbon(aes(ymin=0, ymax = value, fill = name))+
scale_fill_manual(values = c("#00AFBB", "#E7B800", "#FC4E07"))
geom_ribbon(aes(ymin=0, ymax = value)+
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line(aes(color = name))+
geom_ribbon(aes(ymin=0, ymax = value))+
scale_fill_manual(values = c("#00AFBB", "#E7B800", "#FC4E07"))
tv_states_long %>%
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line(aes(color = name))+
geom_ribbon(aes(ymin=0, ymax = value))+
scale_fill_manual(values = c("#00AFBB", "#E7B800", "#FC4E07"))
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line(aes(color = name))+
geom_ribbon(aes(ymin=0, ymax = value, fill = name))+
scale_fill_manual(values = c("#00AFBB", "#E7B800", "#FC4E07"))
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line(aes(color = name))+
geom_ribbon(aes(ymin=0, ymax = value, fill = name))#+
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line()+
geom_ribbon(aes(ymin=0, ymax = value, fill = name))#+
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line(color = c())+
geom_ribbon(aes(ymin=0, ymax = value, fill = name))+
scale_fill_manual(values = c("#00AFBB", "#E7B800", "#FC4E07"))
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line(color = c("#00AFBB", "#E7B800", "#FC4E07"))+
geom_ribbon(aes(ymin=0, ymax = value, fill = name))+
scale_fill_manual(values = c("#00AFBB", "#E7B800", "#FC4E07"))
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line(fill = c("#00AFBB", "#E7B800", "#FC4E07"))+
geom_ribbon(aes(ymin=0, ymax = value, fill = name))+
scale_fill_manual(values = c("#00AFBB", "#E7B800", "#FC4E07"))
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line(aes, c("#00AFBB", "#E7B800", "#FC4E07"))+
geom_ribbon(aes(ymin=0, ymax = value, fill = name))+
scale_fill_manual(values = c("#00AFBB", "#E7B800", "#FC4E07"))
=
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line(c("#00AFBB", "#E7B800", "#FC4E07"))+
geom_ribbon(aes(ymin=0, ymax = value, fill = name))+
scale_fill_manual(values = c("#00AFBB", "#E7B800", "#FC4E07"))
color
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line(color = c("#00AFBB", "#E7B800", "#FC4E07"))+
geom_ribbon(aes(ymin=0, ymax = value, fill = name))+
scale_fill_manual(values = c("#00AFBB", "#E7B800", "#FC4E07"))
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line(fill = c("#00AFBB", "#E7B800", "#FC4E07"))+
geom_ribbon(aes(ymin=0, ymax = value, fill = name))+
scale_fill_manual(values = c("#00AFBB", "#E7B800", "#FC4E07"))
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line(fill = c("#00AFBB", "#E7B800", "#FC4E07"))+
geom_ribbon(aes(ymin=0, ymax = value))+
scale_fill_manual(values = c("#00AFBB", "#E7B800", "#FC4E07"))
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line(fill = c("#00AFBB", "#E7B800", "#FC4E07"))+
geom_ribbon(aes(ymin=0, ymax = value, fill = name))+
scale_fill_manual(values = c("#00AFBB", "#E7B800", "#FC4E07"))
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line(line = c("#00AFBB", "#E7B800", "#FC4E07"))+
geom_ribbon(aes(ymin=0, ymax = value, fill = name))+
scale_fill_manual(values = c("#00AFBB", "#E7B800", "#FC4E07"))
geom_line())+
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line()+
geom_ribbon(aes(ymin=0, ymax = value, fill = name))+
scale_fill_manual(values = c("#00AFBB", "#E7B800", "#FC4E07"))
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line()+
geom_ribbon(aes(ymin=0, ymax = value, fill = name))+
scale_fill_manual(values = c("#00AFBB","#FC4E07", "#E7B800"))
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line()+
geom_ribbon(aes(ymin=0, ymax = value, fill = name))+
scale_fill_manual(values = c("#00AFBB","#FC4E07", "#E7B800"))
tv_states_long <- tidyr::pivot_longer(tv_states, c(florida, texas, puerto_rico)
tv_states_long <- tidyr::pivot_longer(tv_states, c(florida, texas, puerto_rico))
tv_states_long <- tidyr::pivot_longer(tv_states, c(florida, texas, puerto_rico))
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line()+
geom_ribbon(aes(ymin=0, ymax = value, fill = name))+
scale_fill_manual(values = c("#00AFBB","#FC4E07", "#E7B800"))
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line()+
geom_ribbon(aes(ymin=0, ymax = value, fill = name))+
scale_fill_manual(values = c("#00AFBB","#00AFBB", "#E7B800"))
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line()+
geom_ribbon(aes(ymin=0, ymax = value, fill = name))+
scale_fill_manual(values = c("#00AFBB","#FC4E07", "#E7B800"))
tv_states_long <- tidyr::pivot_longer(tv_states, c(florida, texas, puerto_rico))
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line()+
geom_ribbon(aes(ymin=0, ymax = value, fill = name))+
scale_fill_manual(values = c("#00AFBB","#FC4E07", "#E7B800"))
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line()+
geom_ribbon(aes(ymin=0, ymax = value, fill = name))+
scale_fill_manual(values = c("#00AFBB","#FC4E07", "#FF8133"))
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line()+
geom_ribbon(aes(ymin=0, ymax = value, fill = name))+
scale_fill_manual(values = c("#FC4E07","#FC4E07", "#FF8133"))
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line()+
geom_ribbon(aes(ymin=0, ymax = value, fill = name))+
scale_fill_manual(values = c("#00AFBB","#00AFBB", "#FF8133"))
tv_states_long %>%
ggplot(aes(date, value, group = name)) +
geom_line()+
geom_ribbon(aes(ymin=0, ymax = value, fill = name))+
scale_fill_manual(values = c("#FF33A8","#00AFBB", "#FF8133"))
knitr::opts_chunk$set(echo = TRUE)
#install.packages("fivethirtyeight")
#install.packages("remotes")
#remotes::install_github("fivethirtyeightdata/fivethirtyeightdata")
library(fivethirtyeight)
library(fivethirtyeightdata)
library(tidyverse)
library(ggplot2)
google_trends <- data.frame(google_trends)
tv_states <- data.frame(tv_states)
tv_states_long <- pivot_longer(tv_states, c(florida, texas, puerto_rico))
# A dataframe for annotations
annot <- data.frame(
text = c("Texas", "Florida", "Puerto Rico"),
x = c(7, 15, 25),
y = c(0.80, 1.5, 1.5)
)
tv_states_long %>%
mutate(name = fct_relevel(name,
"florida", "texas", "puerto_rico")) %>%
ggplot(aes(x = date, y = value, group = name, fill = name)) +
geom_line()+
geom_ribbon(aes(ymin=0, ymax = value, fill = name), color = "white")+
scale_fill_manual(values = c("#FF33A8", "#FF8133", "#00AFBB"))+
labs(x = "Date",
y = "Share of sentences",
title = "National cable news networks")+
guides(fill=FALSE)+
theme_minimal()+
geom_text(data = annot, aes(x=x, y=y, label = text, color=text), hjust=0, size=4.5)
tv_states_long %>%
mutate(name = fct_relevel(name,
"florida", "texas", "puerto_rico")) %>%
ggplot(aes(x = date, y = value, group = name, fill = name)) +
geom_line()+
geom_ribbon(aes(ymin=0, ymax = value, fill = name), color = "white")+
scale_fill_manual(values = c("#FF33A8", "#FF8133", "#00AFBB"))+
labs(x = "Date",
y = "Share of sentences",
title = "National cable news networks")+
guides(fill=FALSE)+
theme_minimal()#+
tv_states_long %>%
mutate(name = fct_relevel(name,
"florida", "texas", "puerto_rico")) %>%
ggplot(aes(x = date, y = value, group = name, fill = name)) +
geom_line()+
geom_ribbon(aes(ymin=0, ymax = value, fill = name), color = "white")+
scale_fill_manual(values = c("#FF33A8", "#FF8133", "#00AFBB"))+
labs(x = "Date",
y = "Share of sentences",
title = "National cable news networks")+
guides(fill=FALSE)+
theme_minimal()+
geom_text(data = annot)#, aes(x=x, y=y, label = text, color=text), hjust=0, size=4.5)
tv_states_long %>%
mutate(name = fct_relevel(name,
"florida", "texas", "puerto_rico")) %>%
ggplot(aes(x = date, y = value, group = name, fill = name)) +
geom_line()+
geom_ribbon(aes(ymin=0, ymax = value, fill = name), color = "white")+
scale_fill_manual(values = c("#FF33A8", "#FF8133", "#00AFBB"))+
labs(x = "Date",
y = "Share of sentences",
title = "National cable news networks")+
guides(fill=FALSE)+
theme_minimal()+
geom_text(data = annot))#, aes(x=x, y=y, label = text, color=text), hjust=0, size=4.5)
# A dataframe for annotations
annot <- data.frame(
text = c("Texas", "Florida", "Puerto Rico"),
x = c(7, 15, 25),
y = c(0.80, 1.5, 1.5)
)
View(annot)
best_in_class <- mpg %>%
group_by(class) %>%
filter(row_number(desc(hwy)) == 1)
View(best_in_class)
names_df <- tv_states_long %>%
group_by(name) %>%
mutate(average = mean(value))
View(google_trends)
View(names_df)
names_df <- names_df[3,]
View(names_df)
names_df <- tv_states_long %>%
group_by(name) %>%
mutate(average = mean(value))
names_df <- names_df(1:3)
names_df <- names_df[(1:3)]
View(names_df)
names_df <- tv_states_long %>%
group_by(name) %>%
mutate(average = mean(value))
names_df <- head(names_df, 3)
View(names_df)
tv_states_long %>%
mutate(name = fct_relevel(name,
"florida", "texas", "puerto_rico")) %>%
ggplot(aes(x = date, y = value, group = name, fill = name)) +
geom_line()+
geom_ribbon(aes(ymin=0, ymax = value, fill = name), color = "white")+
scale_fill_manual(values = c("#FF33A8", "#FF8133", "#00AFBB"))+
labs(x = "Date",
y = "Share of sentences",
title = "National cable news networks")+
guides(fill=FALSE)+
theme_minimal()+
geom_text(aes(label = names), data = names_df)
tv_states_long %>%
mutate(name = fct_relevel(name,
"florida", "texas", "puerto_rico")) %>%
ggplot(aes(x = date, y = value, group = name, fill = name)) +
geom_line()+
geom_ribbon(aes(ymin=0, ymax = value, fill = name), color = "white")+
scale_fill_manual(values = c("#FF33A8", "#FF8133", "#00AFBB"))+
labs(x = "Date",
y = "Share of sentences",
title = "National cable news networks")+
guides(fill=FALSE)+
theme_minimal()+
geom_text(aes(label = name), data = names_df)
names_df <- tv_states_long %>%
group_by(name) %>%
mutate(average = mean(date))
names_df <- head(names_df, 3)
View(names_df)
names_df <- tv_states_long %>%
group_by(name) %>%
mutate(average = mean(value))
names_df <- head(names_df, 3)
tv_states_long %>%
mutate(name = fct_relevel(name,
"florida", "texas", "puerto_rico")) %>%
ggplot(aes(x = date, y = value, group = name, fill = name)) +
geom_line()+
geom_ribbon(aes(ymin=0, ymax = value, fill = name), color = "white")+
scale_fill_manual(values = c("#FF33A8", "#FF8133", "#00AFBB"))+
labs(x = "Date",
y = "Share of sentences",
title = "National cable news networks")+
guides(fill=FALSE)+
theme_minimal()+
geom_text(aes(label = name), data = names_df)
# A dataframe for annotations
annot <- data.frame(
text = c("Texas", "Florida", "Puerto Rico"),
x = c(7, 15, 25),
y = c(0.80, 1.5, 1.5)
)
tv_states_long %>%
mutate(name = fct_relevel(name,
"florida", "texas", "puerto_rico")) %>%
ggplot(aes(x = date, y = value, group = name, fill = name)) +
geom_line()+
geom_ribbon(aes(ymin=0, ymax = value, fill = name), color = "white")+
scale_fill_manual(values = c("#FF33A8", "#FF8133", "#00AFBB"))+
labs(x = "Date",
y = "Share of sentences",
title = "National cable news networks")+
guides(fill=FALSE)+
theme_minimal()+
#geom_text(aes(label = name), data = names_df)
geom_text(aes(x=x, y=y, label = text, color=text), hjust=0, size=4.5), data = annot)
tv_states_long %>%
mutate(name = fct_relevel(name,
"florida", "texas", "puerto_rico")) %>%
ggplot(aes(x = date, y = value, group = name, fill = name)) +
geom_line()+
geom_ribbon(aes(ymin=0, ymax = value, fill = name), color = "white")+
scale_fill_manual(values = c("#FF33A8", "#FF8133", "#00AFBB"))+
labs(x = "Date",
y = "Share of sentences",
title = "National cable news networks")+
guides(fill=FALSE)+
theme_minimal()+
#geom_text(aes(label = name), data = names_df)
geom_text(aes(x=x, y=y, label = text), hjust=0, size=4.5), data = annot)
tv_states_long %>%
mutate(name = fct_relevel(name,
"florida", "texas", "puerto_rico")) %>%
ggplot(aes(x = date, y = value, group = name, fill = name)) +
geom_line()+
geom_ribbon(aes(ymin=0, ymax = value, fill = name), color = "white")+
scale_fill_manual(values = c("#FF33A8", "#FF8133", "#00AFBB"))+
labs(x = "Date",
y = "Share of sentences",
title = "National cable news networks")+
guides(fill=FALSE)+
theme_minimal()+
#geom_text(aes(label = name), data = names_df)
geom_text(aes(x=x, y=y, label = text, color=text), data = annot)
tv_states_long <- pivot_longer(tv_states, c(florida, texas, puerto_rico))
tv_states_long %>%
mutate(name = fct_relevel(name,
"florida", "texas", "puerto_rico")) %>%
ggplot(aes(x = date, y = value, group = name, fill = name)) +
geom_line()+
geom_ribbon(aes(ymin=0, ymax = value, fill = name), color = "white")+
scale_fill_manual(values = c("#FF33A8", "#FF8133", "#00AFBB"))+
labs(x = "Date",
y = "Share of sentences",
title = "National cable news networks")+
guides(fill=FALSE)+
theme_minimal()+
#geom_text(aes(label = name), data = names_df)
geom_text(aes(x=x, y=y, label = text, color=text), data = annot)
tv_states_long %>%
mutate(name = fct_relevel(name,
"florida", "texas", "puerto_rico")) %>%
ggplot(aes(x = date, y = value, group = name, fill = tv_states_long$name)) +
geom_line()+
geom_ribbon(aes(ymin=0, ymax = value, fill = name), color = "white")+
scale_fill_manual(values = c("#FF33A8", "#FF8133", "#00AFBB"))+
labs(x = "Date",
y = "Share of sentences",
title = "National cable news networks")+
guides(fill=FALSE)+
theme_minimal()+
#geom_text(aes(label = name), data = names_df)
geom_text(aes(x=x, y=y, label = text, color=text), data = annot)
tv_states_long %>%
mutate(name = fct_relevel(name,
"florida", "texas", "puerto_rico")) %>%
ggplot(aes(x = date, y = value, group = name, fill = tv_states_long$name)) +
geom_line()+
geom_ribbon(aes(ymin=0, ymax = value, fill = tv_states_long$name), color = "white")+
scale_fill_manual(values = c("#FF33A8", "#FF8133", "#00AFBB"))+
labs(x = "Date",
y = "Share of sentences",
title = "National cable news networks")+
guides(fill=FALSE)+
theme_minimal()+
#geom_text(aes(label = name), data = names_df)
geom_text(aes(x=x, y=y, label = text, color=text), data = annot)
tv_states_long %>%
mutate(name = fct_relevel(tv_states_long$name,
"florida", "texas", "puerto_rico")) %>%
ggplot(aes(x = date, y = value, group = name, fill = tv_states_long$name)) +
geom_line()+
geom_ribbon(aes(ymin=0, ymax = value, fill = tv_states_long$name), color = "white")+
scale_fill_manual(values = c("#FF33A8", "#FF8133", "#00AFBB"))+
labs(x = "Date",
y = "Share of sentences",
title = "National cable news networks")+
guides(fill=FALSE)+
theme_minimal()+
#geom_text(aes(label = name), data = names_df)
geom_text(aes(x=x, y=y, label = text, color=text), data = annot)
tv_states_long %>%
mutate(tv_states_long$name = fct_relevel(tv_states_long$name,
tv_states_long %>%
mutate(name = fct_relevel(name,
"florida", "texas", "puerto_rico")) %>%
ggplot(aes(x = date, y = value, group = name, fill = name)) +
geom_line()+
geom_ribbon(aes(ymin=0, ymax = value, fill = name), color = "white")+
scale_fill_manual(values = c("#FF33A8", "#FF8133", "#00AFBB"))+
labs(x = "Date",
y = "Share of sentences",
title = "National cable news networks")+
guides(fill=FALSE)+
theme_minimal()+
#geom_text(aes(label = name), data = names_df)
geom_text(aes(x=x, y=y, label = text, color=text), hjust=0, size=4.5), data = annot)
tv_states_long %>%
mutate(name = fct_relevel(name,
"florida", "texas", "puerto_rico")) %>%
ggplot(aes(x = date, y = value, group = name, fill = name)) +
geom_line()+
geom_ribbon(aes(ymin=0, ymax = value, fill = name), color = "white")+
scale_fill_manual(values = c("#FF33A8", "#FF8133", "#00AFBB"))+
labs(x = "Date",
y = "Share of sentences",
title = "National cable news networks")+
guides(fill=FALSE)+
theme_minimal()+
geom_text(aes(x=x, y=y, label = text, color=text, hjust=0, size=4.5), data = annot)
tv_states_long %>%
mutate(name = fct_relevel(name,
"florida", "texas", "puerto_rico")) %>%
ggplot(aes(x = date, y = value, group = name, fill = name)) +
geom_line()+
geom_ribbon(aes(ymin=0, ymax = value, fill = name), color = "white")+
scale_fill_manual(values = c("#FF33A8", "#FF8133", "#00AFBB"))+
labs(x = "Date",
y = "Share of sentences",
title = "National cable news networks")+
guides(fill=FALSE)+
theme_minimal()+
geom_text(aes(x=x, y=y, label = text, color=text), hjust=0, size=4.5), data = annot)
tv_states_long %>%
mutate(name = fct_relevel(name,
"florida", "texas", "puerto_rico")) %>%
ggplot(aes(x = date, y = value, group = name, fill = name)) +
geom_line()+
geom_ribbon(aes(ymin=0, ymax = value, fill = name), color = "white")+
scale_fill_manual(values = c("#FF33A8", "#FF8133", "#00AFBB"))+
labs(x = "Date",
y = "Share of sentences",
title = "National cable news networks")+
guides(fill=FALSE)+
theme_minimal()+
geom_text(aes(x=x, y=y, label = text, color=text), (hjust=0, size=4.5), data = annot)
tv_states_long %>%
mutate(name = fct_relevel(name,
"florida", "texas", "puerto_rico")) %>%
ggplot(aes(x = date, y = value, group = name, fill = name)) +
geom_line()+
geom_ribbon(aes(ymin=0, ymax = value, fill = name), color = "white")+
scale_fill_manual(values = c("#FF33A8", "#FF8133", "#00AFBB"))+
labs(x = "Date",
y = "Share of sentences",
title = "National cable news networks")+
guides(fill=FALSE)+
theme_minimal()+
geom_text(aes(x=x, y=y, label = text, color=text), hjust=0, size=4.5, data = annot)
